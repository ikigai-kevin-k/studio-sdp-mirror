diff --git a/deviceController.py b/deviceController.py
index cee6c92..847b166 100644
--- a/deviceController.py
+++ b/deviceController.py
@@ -63,11 +63,15 @@ class IDPController(Controller):
                     if (
                         "arg" in response_data
                         and "res" in response_data["arg"]
+                        and "err" in response_data["arg"]
                     ):
                         dice_result = response_data["arg"]["res"]
-                        # check if the dice result is valid (three numbers)
+                        error_code = response_data["arg"]["err"]
+                        
+                        # Check if error code is 0 (success) and dice result is valid
                         if (
-                            isinstance(dice_result, list)
+                            error_code == 0
+                            and isinstance(dice_result, list)
                             and len(dice_result) == 3
                             and all(isinstance(x, int) for x in dice_result)
                         ):
@@ -79,9 +83,14 @@ class IDPController(Controller):
                             )
                             return  # return immediately, don't wait for more results
                         else:
-                            self.logger.info(
-                                f"Received invalid result: {dice_result}, continuing to wait..."
-                            )
+                            if error_code != 0:
+                                self.logger.info(
+                                    f"Received error code {error_code}, continuing to wait..."
+                                )
+                            else:
+                                self.logger.info(
+                                    f"Received invalid result: {dice_result}, continuing to wait..."
+                                )
 
         except json.JSONDecodeError as e:
             self.logger.error(f"Failed to parse message JSON: {e}")
